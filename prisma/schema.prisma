generator client {
  provider = "prisma-client-js"
  output   = "./client"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

// users that has permission to access bot pv
model User {
  id            String      @id @default(uuid())
  name          String?
  senderJid     String      @unique
  hasPermission Boolean     @default(false)
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
  userGroups    UserGroup[]
}

// groups that has permission to access bot pv
model Group {
  id           String      @id @unique @default(uuid())
  name         String?
  groupJid     String      @unique
  expireRental DateTime?
  createdAt    DateTime    @default(now())
  updatedAt    DateTime    @updatedAt
  userGroups   UserGroup[]
}

// many-to-many relation between User and Group
model UserGroup {
  id         String   @id @default(uuid())
  userId     String
  groupId    String
  points     Int      @default(0)
  roulettes  Int      @default(0)
  stoleToday Boolean  @default(false)
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  user       User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  group      Group    @relation(fields: [groupId], references: [id], onDelete: Cascade)

  @@unique([userId, groupId])
}
